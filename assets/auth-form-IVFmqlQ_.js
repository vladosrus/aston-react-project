import{R as I,r as _t,j as C,L as mt}from"./index-r8gq01n7.js";import{c as ne}from"./clsx-Zbgk8kpT.js";import{u as bt}from"./use-auth-V9w80lpB.js";import{S as xt}from"./small_preloader-r2jI2VyM.js";var de=e=>e.type==="checkbox",le=e=>e instanceof Date,M=e=>e==null;const rt=e=>typeof e=="object";var S=e=>!M(e)&&!Array.isArray(e)&&rt(e)&&!le(e),Vt=e=>S(e)&&e.target?de(e.target)?e.target.checked:e.target.value:e,At=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ft=(e,n)=>e.has(At(n)),pt=e=>{const n=e.constructor&&e.constructor.prototype;return S(n)&&n.hasOwnProperty("isPrototypeOf")},Me=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function U(e){let n;const s=Array.isArray(e);if(e instanceof Date)n=new Date(e);else if(e instanceof Set)n=new Set(e);else if(!(Me&&(e instanceof Blob||e instanceof FileList))&&(s||S(e)))if(n=s?[]:{},!s&&!pt(e))n=e;else for(const r in e)e.hasOwnProperty(r)&&(n[r]=U(e[r]));else return e;return n}var ye=e=>Array.isArray(e)?e.filter(Boolean):[],D=e=>e===void 0,y=(e,n,s)=>{if(!n||!S(e))return s;const r=ye(n.split(/[,[\].]+?/)).reduce((u,l)=>M(u)?u:u[l],e);return D(r)||r===e?D(e[n])?s:e[n]:r},Q=e=>typeof e=="boolean";const ze={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},B={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},J={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};I.createContext(null);var wt=(e,n,s,r=!0)=>{const u={defaultValues:n._defaultValues};for(const l in e)Object.defineProperty(u,l,{get:()=>{const f=l;return n._proxyFormState[f]!==B.all&&(n._proxyFormState[f]=!r||B.all),s&&(s[f]=!0),e[f]}});return u},j=e=>S(e)&&!Object.keys(e).length,Dt=(e,n,s,r)=>{s(e);const{name:u,...l}=e;return j(l)||Object.keys(l).length>=Object.keys(n).length||Object.keys(l).find(f=>n[f]===(!r||B.all))},ke=e=>Array.isArray(e)?e:[e];function St(e){const n=I.useRef(e);n.current=e,I.useEffect(()=>{const s=!e.disabled&&n.current.subject&&n.current.subject.subscribe({next:n.current.next});return()=>{s&&s.unsubscribe()}},[e.disabled])}var $=e=>typeof e=="string",Et=(e,n,s,r,u)=>$(e)?(r&&n.watch.add(e),y(s,e,u)):Array.isArray(e)?e.map(l=>(r&&n.watch.add(l),y(s,l))):(r&&(n.watchAll=!0),s),Te=e=>/^\w*$/.test(e),st=e=>ye(e.replace(/["|']|\]/g,"").split(/\.|\[/)),A=(e,n,s)=>{let r=-1;const u=Te(n)?[n]:st(n),l=u.length,f=l-1;for(;++r<l;){const m=u[r];let b=s;if(r!==f){const L=e[m];b=S(L)||Array.isArray(L)?L:isNaN(+u[r+1])?{}:[]}e[m]=b,e=e[m]}return e},kt=(e,n,s,r,u)=>n?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[r]:u||!0}}:{},Ge=e=>({isOnSubmit:!e||e===B.onSubmit,isOnBlur:e===B.onBlur,isOnChange:e===B.onChange,isOnAll:e===B.all,isOnTouch:e===B.onTouched}),Je=(e,n,s)=>!s&&(n.watchAll||n.watch.has(e)||[...n.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const fe=(e,n,s,r)=>{for(const u of s||Object.keys(e)){const l=y(e,u);if(l){const{_f:f,...m}=l;if(f){if(f.refs&&f.refs[0]&&n(f.refs[0],u)&&!r)break;if(f.ref&&n(f.ref,f.name)&&!r)break;fe(m,n)}else S(m)&&fe(m,n)}}};var Nt=(e,n,s)=>{const r=ye(y(e,s));return A(r,"root",n[s]),A(e,s,r),e},Oe=e=>e.type==="file",Z=e=>typeof e=="function",me=e=>{if(!Me)return!1;const n=e?e.ownerDocument:0;return e instanceof(n&&n.defaultView?n.defaultView.HTMLElement:HTMLElement)},_e=e=>$(e),Re=e=>e.type==="radio",be=e=>e instanceof RegExp;const Qe={value:!1,isValid:!1},Xe={value:!0,isValid:!0};var it=e=>{if(Array.isArray(e)){if(e.length>1){const n=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:n,isValid:!!n.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||e[0].value===""?Xe:{value:e[0].value,isValid:!0}:Xe:Qe}return Qe};const Ye={isValid:!1,value:null};var nt=e=>Array.isArray(e)?e.reduce((n,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:n,Ye):Ye;function Ze(e,n,s="validate"){if(_e(e)||Array.isArray(e)&&e.every(_e)||Q(e)&&!e)return{type:s,message:_e(e)?e:"",ref:n}}var ae=e=>S(e)&&!be(e)?e:{value:e,message:""},et=async(e,n,s,r,u)=>{const{ref:l,refs:f,required:m,maxLength:b,minLength:L,min:X,max:F,pattern:h,validate:P,name:O,valueAsNumber:ge,mount:Ae,disabled:Y}=e._f,_=y(n,O);if(!Ae||Y)return{};const K=f?f[0]:l,z=x=>{r&&K.reportValidity&&(K.setCustomValidity(Q(x)?"":x||""),K.reportValidity())},E={},ue=Re(l),se=de(l),Fe=ue||se,q=(ge||Oe(l))&&D(l.value)&&D(_)||me(l)&&l.value===""||_===""||Array.isArray(_)&&!_.length,ee=kt.bind(null,O,s,E),G=(x,v,p,T=J.maxLength,R=J.minLength)=>{const W=x?v:p;E[O]={type:x?T:R,message:W,ref:l,...ee(x?T:R,W)}};if(u?!Array.isArray(_)||!_.length:m&&(!Fe&&(q||M(_))||Q(_)&&!_||se&&!it(f).isValid||ue&&!nt(f).isValid)){const{value:x,message:v}=_e(m)?{value:!!m,message:m}:ae(m);if(x&&(E[O]={type:J.required,message:v,ref:K,...ee(J.required,v)},!s))return z(v),E}if(!q&&(!M(X)||!M(F))){let x,v;const p=ae(F),T=ae(X);if(!M(_)&&!isNaN(_)){const R=l.valueAsNumber||_&&+_;M(p.value)||(x=R>p.value),M(T.value)||(v=R<T.value)}else{const R=l.valueAsDate||new Date(_),W=he=>new Date(new Date().toDateString()+" "+he),te=l.type=="time",oe=l.type=="week";$(p.value)&&_&&(x=te?W(_)>W(p.value):oe?_>p.value:R>new Date(p.value)),$(T.value)&&_&&(v=te?W(_)<W(T.value):oe?_<T.value:R<new Date(T.value))}if((x||v)&&(G(!!x,p.message,T.message,J.max,J.min),!s))return z(E[O].message),E}if((b||L)&&!q&&($(_)||u&&Array.isArray(_))){const x=ae(b),v=ae(L),p=!M(x.value)&&_.length>+x.value,T=!M(v.value)&&_.length<+v.value;if((p||T)&&(G(p,x.message,v.message),!s))return z(E[O].message),E}if(h&&!q&&$(_)){const{value:x,message:v}=ae(h);if(be(x)&&!_.match(x)&&(E[O]={type:J.pattern,message:v,ref:l,...ee(J.pattern,v)},!s))return z(v),E}if(P){if(Z(P)){const x=await P(_,n),v=Ze(x,K);if(v&&(E[O]={...v,...ee(J.validate,v.message)},!s))return z(v.message),E}else if(S(P)){let x={};for(const v in P){if(!j(x)&&!s)break;const p=Ze(await P[v](_,n),K,v);p&&(x={...p,...ee(v,p.message)},z(p.message),s&&(E[O]=x))}if(!j(x)&&(E[O]={ref:K,...x},!s))return E}}return z(!0),E};function Ct(e,n){const s=n.slice(0,-1).length;let r=0;for(;r<s;)e=D(e)?r++:e[n[r++]];return e}function Lt(e){for(const n in e)if(e.hasOwnProperty(n)&&!D(e[n]))return!1;return!0}function N(e,n){const s=Array.isArray(n)?n:Te(n)?[n]:st(n),r=s.length===1?e:Ct(e,s),u=s.length-1,l=s[u];return r&&delete r[l],u!==0&&(S(r)&&j(r)||Array.isArray(r)&&Lt(r))&&N(e,s.slice(0,-1)),e}var Ne=()=>{let e=[];return{get observers(){return e},next:u=>{for(const l of e)l.next&&l.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(l=>l!==u)}}),unsubscribe:()=>{e=[]}}},xe=e=>M(e)||!rt(e);function re(e,n){if(xe(e)||xe(n))return e===n;if(le(e)&&le(n))return e.getTime()===n.getTime();const s=Object.keys(e),r=Object.keys(n);if(s.length!==r.length)return!1;for(const u of s){const l=e[u];if(!r.includes(u))return!1;if(u!=="ref"){const f=n[u];if(le(l)&&le(f)||S(l)&&S(f)||Array.isArray(l)&&Array.isArray(f)?!re(l,f):l!==f)return!1}}return!0}var at=e=>e.type==="select-multiple",Mt=e=>Re(e)||de(e),Ce=e=>me(e)&&e.isConnected,lt=e=>{for(const n in e)if(Z(e[n]))return!0;return!1};function Ve(e,n={}){const s=Array.isArray(e);if(S(e)||s)for(const r in e)Array.isArray(e[r])||S(e[r])&&!lt(e[r])?(n[r]=Array.isArray(e[r])?[]:{},Ve(e[r],n[r])):M(e[r])||(n[r]=!0);return n}function ut(e,n,s){const r=Array.isArray(e);if(S(e)||r)for(const u in e)Array.isArray(e[u])||S(e[u])&&!lt(e[u])?D(n)||xe(s[u])?s[u]=Array.isArray(e[u])?Ve(e[u],[]):{...Ve(e[u])}:ut(e[u],M(n)?{}:n[u],s[u]):s[u]=!re(e[u],n[u]);return s}var ve=(e,n)=>ut(e,n,Ve(n)),ot=(e,{valueAsNumber:n,valueAsDate:s,setValueAs:r})=>D(e)?e:n?e===""?NaN:e&&+e:s&&$(e)?new Date(e):r?r(e):e;function Le(e){const n=e.ref;if(!(e.refs?e.refs.every(s=>s.disabled):n.disabled))return Oe(n)?n.files:Re(n)?nt(e.refs).value:at(n)?[...n.selectedOptions].map(({value:s})=>s):de(n)?it(e.refs).value:ot(D(n.value)?e.ref.value:n.value,e)}var Tt=(e,n,s,r)=>{const u={};for(const l of e){const f=y(n,l);f&&A(u,l,f._f)}return{criteriaMode:s,names:[...e],fields:u,shouldUseNativeValidation:r}},ce=e=>D(e)?e:be(e)?e.source:S(e)?be(e.value)?e.value.source:e.value:e,Ot=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function tt(e,n,s){const r=y(e,s);if(r||Te(s))return{error:r,name:s};const u=s.split(".");for(;u.length;){const l=u.join("."),f=y(n,l),m=y(e,l);if(f&&!Array.isArray(f)&&s!==l)return{name:s};if(m&&m.type)return{name:l,error:m};u.pop()}return{name:s}}var Rt=(e,n,s,r,u)=>u.isOnAll?!1:!s&&u.isOnTouch?!(n||e):(s?r.isOnBlur:u.isOnBlur)?!e:(s?r.isOnChange:u.isOnChange)?e:!0,Ut=(e,n)=>!ye(y(e,n)).length&&N(e,n);const It={mode:B.onSubmit,reValidateMode:B.onChange,shouldFocusError:!0};function jt(e={},n){let s={...It,...e},r={submitCount:0,isDirty:!1,isLoading:Z(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:s.errors||{},disabled:s.disabled||!1},u={},l=S(s.values)||S(s.defaultValues)?U(s.values||s.defaultValues)||{}:{},f=s.shouldUnregister?{}:U(l),m={action:!1,mount:!1,watch:!1},b={mount:new Set,unMount:new Set,array:new Set,watch:new Set},L,X=0;const F={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:Ne(),array:Ne(),state:Ne()},P=Ge(s.mode),O=Ge(s.reValidateMode),ge=s.criteriaMode===B.all,Ae=t=>i=>{clearTimeout(X),X=setTimeout(t,i)},Y=async t=>{if(F.isValid||t){const i=s.resolver?j((await q()).errors):await G(u,!0);i!==r.isValid&&h.state.next({isValid:i})}},_=t=>F.isValidating&&h.state.next({isValidating:t}),K=(t,i=[],a,d,c=!0,o=!0)=>{if(d&&a){if(m.action=!0,o&&Array.isArray(y(u,t))){const g=a(y(u,t),d.argA,d.argB);c&&A(u,t,g)}if(o&&Array.isArray(y(r.errors,t))){const g=a(y(r.errors,t),d.argA,d.argB);c&&A(r.errors,t,g),Ut(r.errors,t)}if(F.touchedFields&&o&&Array.isArray(y(r.touchedFields,t))){const g=a(y(r.touchedFields,t),d.argA,d.argB);c&&A(r.touchedFields,t,g)}F.dirtyFields&&(r.dirtyFields=ve(l,f)),h.state.next({name:t,isDirty:v(t,i),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else A(f,t,i)},z=(t,i)=>{A(r.errors,t,i),h.state.next({errors:r.errors})},E=t=>{r.errors=t,h.state.next({errors:r.errors,isValid:!1})},ue=(t,i,a,d)=>{const c=y(u,t);if(c){const o=y(f,t,D(a)?y(l,t):a);D(o)||d&&d.defaultChecked||i?A(f,t,i?o:Le(c._f)):R(t,o),m.mount&&Y()}},se=(t,i,a,d,c)=>{let o=!1,g=!1;const V={name:t},k=!!(y(u,t)&&y(u,t)._f.disabled);if(!a||d){F.isDirty&&(g=r.isDirty,r.isDirty=V.isDirty=v(),o=g!==V.isDirty);const H=k||re(y(l,t),i);g=!!(!k&&y(r.dirtyFields,t)),H||k?N(r.dirtyFields,t):A(r.dirtyFields,t,!0),V.dirtyFields=r.dirtyFields,o=o||F.dirtyFields&&g!==!H}if(a){const H=y(r.touchedFields,t);H||(A(r.touchedFields,t,a),V.touchedFields=r.touchedFields,o=o||F.touchedFields&&H!==a)}return o&&c&&h.state.next(V),o?V:{}},Fe=(t,i,a,d)=>{const c=y(r.errors,t),o=F.isValid&&Q(i)&&r.isValid!==i;if(e.delayError&&a?(L=Ae(()=>z(t,a)),L(e.delayError)):(clearTimeout(X),L=null,a?A(r.errors,t,a):N(r.errors,t)),(a?!re(c,a):c)||!j(d)||o){const g={...d,...o&&Q(i)?{isValid:i}:{},errors:r.errors,name:t};r={...r,...g},h.state.next(g)}_(!1)},q=async t=>s.resolver(f,s.context,Tt(t||b.mount,u,s.criteriaMode,s.shouldUseNativeValidation)),ee=async t=>{const{errors:i}=await q(t);if(t)for(const a of t){const d=y(i,a);d?A(r.errors,a,d):N(r.errors,a)}else r.errors=i;return i},G=async(t,i,a={valid:!0})=>{for(const d in t){const c=t[d];if(c){const{_f:o,...g}=c;if(o){const V=b.array.has(o.name),k=await et(c,f,ge,s.shouldUseNativeValidation&&!i,V);if(k[o.name]&&(a.valid=!1,i))break;!i&&(y(k,o.name)?V?Nt(r.errors,k,o.name):A(r.errors,o.name,k[o.name]):N(r.errors,o.name))}g&&await G(g,i,a)}}return a.valid},x=()=>{for(const t of b.unMount){const i=y(u,t);i&&(i._f.refs?i._f.refs.every(a=>!Ce(a)):!Ce(i._f.ref))&&we(t)}b.unMount=new Set},v=(t,i)=>(t&&i&&A(f,t,i),!re(Ue(),l)),p=(t,i,a)=>Et(t,b,{...m.mount?f:D(i)?l:$(t)?{[t]:i}:i},a,i),T=t=>ye(y(m.mount?f:l,t,e.shouldUnregister?y(l,t,[]):[])),R=(t,i,a={})=>{const d=y(u,t);let c=i;if(d){const o=d._f;o&&(!o.disabled&&A(f,t,ot(i,o)),c=me(o.ref)&&M(i)?"":i,at(o.ref)?[...o.ref.options].forEach(g=>g.selected=c.includes(g.value)):o.refs?de(o.ref)?o.refs.length>1?o.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(c)?!!c.find(V=>V===g.value):c===g.value)):o.refs[0]&&(o.refs[0].checked=!!c):o.refs.forEach(g=>g.checked=g.value===c):Oe(o.ref)?o.ref.value="":(o.ref.value=c,o.ref.type||h.values.next({name:t,values:{...f}})))}(a.shouldDirty||a.shouldTouch)&&se(t,c,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&pe(t)},W=(t,i,a)=>{for(const d in i){const c=i[d],o=`${t}.${d}`,g=y(u,o);(b.array.has(t)||!xe(c)||g&&!g._f)&&!le(c)?W(o,c,a):R(o,c,a)}},te=(t,i,a={})=>{const d=y(u,t),c=b.array.has(t),o=U(i);A(f,t,o),c?(h.array.next({name:t,values:{...f}}),(F.isDirty||F.dirtyFields)&&a.shouldDirty&&h.state.next({name:t,dirtyFields:ve(l,f),isDirty:v(t,o)})):d&&!d._f&&!M(o)?W(t,o,a):R(t,o,a),Je(t,b)&&h.state.next({...r}),h.values.next({name:t,values:{...f}}),!m.mount&&n()},oe=async t=>{const i=t.target;let a=i.name,d=!0;const c=y(u,a),o=()=>i.type?Le(c._f):Vt(t),g=V=>{d=Number.isNaN(V)||V===y(f,a,V)};if(c){let V,k;const H=o(),ie=t.type===ze.BLUR||t.type===ze.FOCUS_OUT,gt=!Ot(c._f)&&!s.resolver&&!y(r.errors,a)&&!c._f.deps||Rt(ie,y(r.touchedFields,a),r.isSubmitted,O,P),Se=Je(a,b,ie);A(f,a,H),ie?(c._f.onBlur&&c._f.onBlur(t),L&&L(0)):c._f.onChange&&c._f.onChange(t);const Ee=se(a,H,ie,!1),ht=!j(Ee)||Se;if(!ie&&h.values.next({name:a,type:t.type,values:{...f}}),gt)return F.isValid&&Y(),ht&&h.state.next({name:a,...Se?{}:Ee});if(!ie&&Se&&h.state.next({...r}),_(!0),s.resolver){const{errors:$e}=await q([a]);if(g(H),d){const vt=tt(r.errors,u,a),Ke=tt($e,u,vt.name||a);V=Ke.error,a=Ke.name,k=j($e)}}else V=(await et(c,f,ge,s.shouldUseNativeValidation))[a],g(H),d&&(V?k=!1:F.isValid&&(k=await G(u,!0)));d&&(c._f.deps&&pe(c._f.deps),Fe(a,k,V,Ee))}},he=(t,i)=>{if(y(r.errors,i)&&t.focus)return t.focus(),1},pe=async(t,i={})=>{let a,d;const c=ke(t);if(_(!0),s.resolver){const o=await ee(D(t)?t:c);a=j(o),d=t?!c.some(g=>y(o,g)):a}else t?(d=(await Promise.all(c.map(async o=>{const g=y(u,o);return await G(g&&g._f?{[o]:g}:g)}))).every(Boolean),!(!d&&!r.isValid)&&Y()):d=a=await G(u);return h.state.next({...!$(t)||F.isValid&&a!==r.isValid?{}:{name:t},...s.resolver||!t?{isValid:a}:{},errors:r.errors,isValidating:!1}),i.shouldFocus&&!d&&fe(u,he,t?c:b.mount),d},Ue=t=>{const i={...l,...m.mount?f:{}};return D(t)?i:$(t)?y(i,t):t.map(a=>y(i,a))},Ie=(t,i)=>({invalid:!!y((i||r).errors,t),isDirty:!!y((i||r).dirtyFields,t),isTouched:!!y((i||r).touchedFields,t),error:y((i||r).errors,t)}),ct=t=>{t&&ke(t).forEach(i=>N(r.errors,i)),h.state.next({errors:t?r.errors:{}})},je=(t,i,a)=>{const d=(y(u,t,{_f:{}})._f||{}).ref;A(r.errors,t,{...i,ref:d}),h.state.next({name:t,errors:r.errors,isValid:!1}),a&&a.shouldFocus&&d&&d.focus&&d.focus()},ft=(t,i)=>Z(t)?h.values.subscribe({next:a=>t(p(void 0,i),a)}):p(t,i,!0),we=(t,i={})=>{for(const a of t?ke(t):b.mount)b.mount.delete(a),b.array.delete(a),i.keepValue||(N(u,a),N(f,a)),!i.keepError&&N(r.errors,a),!i.keepDirty&&N(r.dirtyFields,a),!i.keepTouched&&N(r.touchedFields,a),!s.shouldUnregister&&!i.keepDefaultValue&&N(l,a);h.values.next({values:{...f}}),h.state.next({...r,...i.keepDirty?{isDirty:v()}:{}}),!i.keepIsValid&&Y()},Be=({disabled:t,name:i,field:a,fields:d,value:c})=>{if(Q(t)){const o=t?void 0:D(c)?Le(a?a._f:y(d,i)._f):c;A(f,i,o),se(i,o,!1,!1,!0)}},De=(t,i={})=>{let a=y(u,t);const d=Q(i.disabled);return A(u,t,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:t}},name:t,mount:!0,...i}}),b.mount.add(t),a?Be({field:a,disabled:i.disabled,name:t,value:i.value}):ue(t,!0,i.value),{...d?{disabled:i.disabled}:{},...s.progressive?{required:!!i.required,min:ce(i.min),max:ce(i.max),minLength:ce(i.minLength),maxLength:ce(i.maxLength),pattern:ce(i.pattern)}:{},name:t,onChange:oe,onBlur:oe,ref:c=>{if(c){De(t,i),a=y(u,t);const o=D(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,g=Mt(o),V=a._f.refs||[];if(g?V.find(k=>k===o):o===a._f.ref)return;A(u,t,{_f:{...a._f,...g?{refs:[...V.filter(Ce),o,...Array.isArray(y(l,t))?[{}]:[]],ref:{type:o.type,name:t}}:{ref:o}}}),ue(t,!1,void 0,o)}else a=y(u,t,{}),a._f&&(a._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(Ft(b.array,t)&&m.action)&&b.unMount.add(t)}}},Pe=()=>s.shouldFocusError&&fe(u,he,b.mount),dt=t=>{Q(t)&&(h.state.next({disabled:t}),fe(u,(i,a)=>{let d=t;const c=y(u,a);c&&Q(c._f.disabled)&&(d||(d=c._f.disabled)),i.disabled=d},0,!1))},qe=(t,i)=>async a=>{let d;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let c=U(f);if(h.state.next({isSubmitting:!0}),s.resolver){const{errors:o,values:g}=await q();r.errors=o,c=g}else await G(u);if(N(r.errors,"root"),j(r.errors)){h.state.next({errors:{}});try{await t(c,a)}catch(o){d=o}}else i&&await i({...r.errors},a),Pe(),setTimeout(Pe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:j(r.errors)&&!d,submitCount:r.submitCount+1,errors:r.errors}),d)throw d},yt=(t,i={})=>{y(u,t)&&(D(i.defaultValue)?te(t,U(y(l,t))):(te(t,i.defaultValue),A(l,t,U(i.defaultValue))),i.keepTouched||N(r.touchedFields,t),i.keepDirty||(N(r.dirtyFields,t),r.isDirty=i.defaultValue?v(t,U(y(l,t))):v()),i.keepError||(N(r.errors,t),F.isValid&&Y()),h.state.next({...r}))},We=(t,i={})=>{const a=t?U(t):l,d=U(a),c=t&&!j(t)?d:l;if(i.keepDefaultValues||(l=a),!i.keepValues){if(i.keepDirtyValues)for(const o of b.mount)y(r.dirtyFields,o)?A(c,o,y(f,o)):te(o,y(c,o));else{if(Me&&D(t))for(const o of b.mount){const g=y(u,o);if(g&&g._f){const V=Array.isArray(g._f.refs)?g._f.refs[0]:g._f.ref;if(me(V)){const k=V.closest("form");if(k){k.reset();break}}}}u={}}f=e.shouldUnregister?i.keepDefaultValues?U(l):{}:U(c),h.array.next({values:{...c}}),h.values.next({values:{...c}})}b={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!m.mount&&n(),m.mount=!F.isValid||!!i.keepIsValid||!!i.keepDirtyValues,m.watch=!!e.shouldUnregister,h.state.next({submitCount:i.keepSubmitCount?r.submitCount:0,isDirty:i.keepDirty?r.isDirty:!!(i.keepDefaultValues&&!re(t,l)),isSubmitted:i.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:i.keepDirtyValues?i.keepDefaultValues&&f?ve(l,f):r.dirtyFields:i.keepDefaultValues&&t?ve(l,t):{},touchedFields:i.keepTouched?r.touchedFields:{},errors:i.keepErrors?r.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},He=(t,i)=>We(Z(t)?t(f):t,i);return{control:{register:De,unregister:we,getFieldState:Ie,handleSubmit:qe,setError:je,_executeSchema:q,_getWatch:p,_getDirty:v,_updateValid:Y,_removeUnmounted:x,_updateFieldArray:K,_updateDisabledField:Be,_getFieldArray:T,_reset:We,_resetDefaultValues:()=>Z(s.defaultValues)&&s.defaultValues().then(t=>{He(t,s.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:t=>{r={...r,...t}},_disableForm:dt,_subjects:h,_proxyFormState:F,_setErrors:E,get _fields(){return u},get _formValues(){return f},get _state(){return m},set _state(t){m=t},get _defaultValues(){return l},get _names(){return b},set _names(t){b=t},get _formState(){return r},set _formState(t){r=t},get _options(){return s},set _options(t){s={...s,...t}}},trigger:pe,register:De,handleSubmit:qe,watch:ft,setValue:te,getValues:Ue,reset:He,resetField:yt,clearErrors:ct,unregister:we,setError:je,setFocus:(t,i={})=>{const a=y(u,t),d=a&&a._f;if(d){const c=d.refs?d.refs[0]:d.ref;c.focus&&(c.focus(),i.shouldSelect&&c.select())}},getFieldState:Ie}}function Bt(e={}){const n=I.useRef(),s=I.useRef(),[r,u]=I.useState({isDirty:!1,isValidating:!1,isLoading:Z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Z(e.defaultValues)?void 0:e.defaultValues});n.current||(n.current={...jt(e,()=>u(f=>({...f}))),formState:r});const l=n.current.control;return l._options=e,St({subject:l._subjects.state,next:f=>{Dt(f,l._proxyFormState,l._updateFormState,!0)&&u({...l._formState})}}),I.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),I.useEffect(()=>{if(l._proxyFormState.isDirty){const f=l._getDirty();f!==r.isDirty&&l._subjects.state.next({isDirty:f})}},[l,r.isDirty]),I.useEffect(()=>{e.values&&!re(e.values,s.current)?(l._reset(e.values,l._options.resetOptions),s.current=e.values,u(f=>({...f}))):l._resetDefaultValues()},[e.values,l]),I.useEffect(()=>{e.errors&&l._setErrors(e.errors)},[e.errors,l]),I.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),I.useEffect(()=>{e.shouldUnregister&&l._subjects.values.next({values:l._getWatch()})},[e.shouldUnregister,l]),n.current.formState=wt(r,l),n.current}const Pt="_form_1pnvd_1",qt="_title_1pnvd_7",Wt="_inputContainer_1pnvd_13",Ht="_inputName_1pnvd_20",$t="_input_1pnvd_13",Kt="_errorInput_1pnvd_38",zt="_errorMessage_1pnvd_42",Gt="_messageVisible_1pnvd_50",Jt="_submitErrorMessage_1pnvd_53 _errorMessage_1pnvd_42",Qt="_button_1pnvd_61",Xt="_buttonDisabled_1pnvd_75",Yt="_captionContainer_1pnvd_89",Zt="_caption_1pnvd_89",er="_link_1pnvd_95",w={form:Pt,title:qt,inputContainer:Wt,inputName:Ht,input:$t,errorInput:Kt,errorMessage:zt,messageVisible:Gt,submitErrorMessage:Jt,button:Qt,buttonDisabled:Xt,captionContainer:Yt,caption:Zt,link:er},ur=_t.memo(e=>{var F,h;const{register:n,handleSubmit:s,formState:{errors:r,isValid:u},reset:l}=Bt({mode:"onChange"}),{isLoginLoading:f,isRegistrationLoading:m,loginError:b,registrationError:L}=bt(),X=P=>{e.onSubmit(P),l()};return C.jsxs("form",{className:w.form,onSubmit:s(X),noValidate:!0,children:[C.jsx("h2",{className:w.title,children:e.name}),C.jsxs("div",{className:w.inputContainer,children:[C.jsx("label",{className:w.inputName,htmlFor:"email",children:"E-mail"}),C.jsx("input",{...n("email",{required:"Это поле обязательно к заполнению",pattern:{value:/.+@.+..+/,message:"Указан некорректный email"}}),type:"email",id:"email",autoComplete:"email",className:ne(w.input,{[w.errorInput]:r.email})}),C.jsx("span",{className:ne(w.errorMessage,{[w.messageVisible]:r.email}),children:(F=r.email)==null?void 0:F.message})]}),C.jsxs("div",{className:w.inputContainer,children:[C.jsx("label",{className:w.inputName,htmlFor:"email",children:"Password"}),C.jsx("input",{...n("password",{required:"Это поле обязательно к заполнению",pattern:{value:/^(?!.*[А-Я а-я]).{8,50}/,message:"Указан некорректный пароль"},minLength:{value:8,message:"Минимальное количество символов - 8"},maxLength:{value:50,message:"Максимальное количество символов - 50"}}),className:ne(w.input,{[w.errorInput]:r.password}),type:"password",id:"password"}),C.jsx("span",{className:ne(w.errorMessage,{[w.messageVisible]:r.password}),children:(h=r.password)==null?void 0:h.message})]}),C.jsx("p",{className:ne(w.submitErrorMessage,{[w.messageVisible]:e.name==="Регистрация"?L:b}),children:e.name==="Регистрация"?L:b}),C.jsx("button",{type:"submit",disabled:!u,className:ne(w.button,{[w.buttonDisabled]:!u}),children:f||m?C.jsx(xt,{height:40}):e.name==="Регистрация"?"Зарегистрироваться":"Войти"}),C.jsx("div",{className:w.captionContainer,children:C.jsxs("p",{className:w.caption,children:[e.name==="Регистрация"?"Уже зарегистрированы? ":"Ещё не зарегистрированы? ",C.jsx(mt,{to:e.name==="Регистрация"?"/aston-react-project/signin":"/aston-react-project/signup",className:w.link,children:e.name==="Регистрация"?"Войти":"Регистрация"})]})})]})});export{ur as A};
