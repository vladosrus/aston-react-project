import{R as I,r as vt,a as bt,j as C,c as Q,L as mt}from"./index-69SyOyib.js";import{u as xt}from"./use-auth-_MZkrvad.js";import{S as kt}from"./small_preloader-2zN7z7DP.js";var de=e=>e.type==="checkbox",le=e=>e instanceof Date,M=e=>e==null;const rt=e=>typeof e=="object";var p=e=>!M(e)&&!Array.isArray(e)&&rt(e)&&!le(e),Vt=e=>p(e)&&e.target?de(e.target)?e.target.checked:e.target.value:e,wt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Dt=(e,s)=>e.has(wt(s)),At=e=>{const s=e.constructor&&e.constructor.prototype;return p(s)&&s.hasOwnProperty("isPrototypeOf")},Me=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function U(e){let s;const i=Array.isArray(e);if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(Me&&(e instanceof Blob||e instanceof FileList))&&(i||p(e)))if(s=i?[]:{},!i&&!At(e))s=e;else for(const r in e)e.hasOwnProperty(r)&&(s[r]=U(e[r]));else return e;return s}var ye=e=>Array.isArray(e)?e.filter(Boolean):[],F=e=>e===void 0,y=(e,s,i)=>{if(!s||!p(e))return i;const r=ye(s.split(/[,[\].]+?/)).reduce((u,l)=>M(u)?u:u[l],e);return F(r)||r===e?F(e[s])?i:e[s]:r},Y=e=>typeof e=="boolean";const ze={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},P={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},X={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};I.createContext(null);var Ft=(e,s,i,r=!0)=>{const u={defaultValues:s._defaultValues};for(const l in e)Object.defineProperty(u,l,{get:()=>{const f=l;return s._proxyFormState[f]!==P.all&&(s._proxyFormState[f]=!r||P.all),i&&(i[f]=!0),e[f]}});return u},j=e=>p(e)&&!Object.keys(e).length,pt=(e,s,i,r)=>{i(e);const{name:u,...l}=e;return j(l)||Object.keys(l).length>=Object.keys(s).length||Object.keys(l).find(f=>s[f]===(!r||P.all))},Ee=e=>Array.isArray(e)?e:[e];function St(e){const s=I.useRef(e);s.current=e,I.useEffect(()=>{const i=!e.disabled&&s.current.subject&&s.current.subject.subscribe({next:s.current.next});return()=>{i&&i.unsubscribe()}},[e.disabled])}var $=e=>typeof e=="string",Et=(e,s,i,r,u)=>$(e)?(r&&s.watch.add(e),y(i,e,u)):Array.isArray(e)?e.map(l=>(r&&s.watch.add(l),y(i,l))):(r&&(s.watchAll=!0),i),Te=e=>/^\w*$/.test(e),st=e=>ye(e.replace(/["|']|\]/g,"").split(/\.|\[/)),w=(e,s,i)=>{let r=-1;const u=Te(s)?[s]:st(s),l=u.length,f=l-1;for(;++r<l;){const b=u[r];let m=i;if(r!==f){const L=e[b];m=p(L)||Array.isArray(L)?L:isNaN(+u[r+1])?{}:[]}e[b]=m,e=e[b]}return e},Nt=(e,s,i,r,u)=>s?{...i[e],types:{...i[e]&&i[e].types?i[e].types:{},[r]:u||!0}}:{},Ge=e=>({isOnSubmit:!e||e===P.onSubmit,isOnBlur:e===P.onBlur,isOnChange:e===P.onChange,isOnAll:e===P.all,isOnTouch:e===P.onTouched}),Je=(e,s,i)=>!i&&(s.watchAll||s.watch.has(e)||[...s.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const fe=(e,s,i,r)=>{for(const u of i||Object.keys(e)){const l=y(e,u);if(l){const{_f:f,...b}=l;if(f){if(f.refs&&f.refs[0]&&s(f.refs[0],u)&&!r)break;if(f.ref&&s(f.ref,f.name)&&!r)break;fe(b,s)}else p(b)&&fe(b,s)}}};var Ct=(e,s,i)=>{const r=ye(y(e,i));return w(r,"root",s[i]),w(e,i,r),e},Oe=e=>e.type==="file",ee=e=>typeof e=="function",be=e=>{if(!Me)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},ve=e=>$(e),Re=e=>e.type==="radio",me=e=>e instanceof RegExp;const Qe={value:!1,isValid:!1},Xe={value:!0,isValid:!0};var it=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(i=>i&&i.checked&&!i.disabled).map(i=>i.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!F(e[0].attributes.value)?F(e[0].value)||e[0].value===""?Xe:{value:e[0].value,isValid:!0}:Xe:Qe}return Qe};const Ye={isValid:!1,value:null};var at=e=>Array.isArray(e)?e.reduce((s,i)=>i&&i.checked&&!i.disabled?{isValid:!0,value:i.value}:s,Ye):Ye;function Ze(e,s,i="validate"){if(ve(e)||Array.isArray(e)&&e.every(ve)||Y(e)&&!e)return{type:i,message:ve(e)?e:"",ref:s}}var ne=e=>p(e)&&!me(e)?e:{value:e,message:""},et=async(e,s,i,r,u)=>{const{ref:l,refs:f,required:b,maxLength:m,minLength:L,min:K,max:D,pattern:h,validate:B,name:T,valueAsNumber:ge,mount:Ve,disabled:Z}=e._f,v=y(s,T);if(!Ve||Z)return{};const z=f?f[0]:l,G=x=>{r&&z.reportValidity&&(z.setCustomValidity(Y(x)?"":x||""),z.reportValidity())},S={},ue=Re(l),ie=de(l),we=ue||ie,q=(ge||Oe(l))&&F(l.value)&&F(v)||be(l)&&l.value===""||v===""||Array.isArray(v)&&!v.length,te=Nt.bind(null,T,i,S),J=(x,_,A,O=X.maxLength,R=X.minLength)=>{const W=x?_:A;S[T]={type:x?O:R,message:W,ref:l,...te(x?O:R,W)}};if(u?!Array.isArray(v)||!v.length:b&&(!we&&(q||M(v))||Y(v)&&!v||ie&&!it(f).isValid||ue&&!at(f).isValid)){const{value:x,message:_}=ve(b)?{value:!!b,message:b}:ne(b);if(x&&(S[T]={type:X.required,message:_,ref:z,...te(X.required,_)},!i))return G(_),S}if(!q&&(!M(K)||!M(D))){let x,_;const A=ne(D),O=ne(K);if(!M(v)&&!isNaN(v)){const R=l.valueAsNumber||v&&+v;M(A.value)||(x=R>A.value),M(O.value)||(_=R<O.value)}else{const R=l.valueAsDate||new Date(v),W=he=>new Date(new Date().toDateString()+" "+he),re=l.type=="time",oe=l.type=="week";$(A.value)&&v&&(x=re?W(v)>W(A.value):oe?v>A.value:R>new Date(A.value)),$(O.value)&&v&&(_=re?W(v)<W(O.value):oe?v<O.value:R<new Date(O.value))}if((x||_)&&(J(!!x,A.message,O.message,X.max,X.min),!i))return G(S[T].message),S}if((m||L)&&!q&&($(v)||u&&Array.isArray(v))){const x=ne(m),_=ne(L),A=!M(x.value)&&v.length>+x.value,O=!M(_.value)&&v.length<+_.value;if((A||O)&&(J(A,x.message,_.message),!i))return G(S[T].message),S}if(h&&!q&&$(v)){const{value:x,message:_}=ne(h);if(me(x)&&!v.match(x)&&(S[T]={type:X.pattern,message:_,ref:l,...te(X.pattern,_)},!i))return G(_),S}if(B){if(ee(B)){const x=await B(v,s),_=Ze(x,z);if(_&&(S[T]={..._,...te(X.validate,_.message)},!i))return G(_.message),S}else if(p(B)){let x={};for(const _ in B){if(!j(x)&&!i)break;const A=Ze(await B[_](v,s),z,_);A&&(x={...A,...te(_,A.message)},G(A.message),i&&(S[T]=x))}if(!j(x)&&(S[T]={ref:z,...x},!i))return S}}return G(!0),S};function Lt(e,s){const i=s.slice(0,-1).length;let r=0;for(;r<i;)e=F(e)?r++:e[s[r++]];return e}function Mt(e){for(const s in e)if(e.hasOwnProperty(s)&&!F(e[s]))return!1;return!0}function N(e,s){const i=Array.isArray(s)?s:Te(s)?[s]:st(s),r=i.length===1?e:Lt(e,i),u=i.length-1,l=i[u];return r&&delete r[l],u!==0&&(p(r)&&j(r)||Array.isArray(r)&&Mt(r))&&N(e,i.slice(0,-1)),e}var Ne=()=>{let e=[];return{get observers(){return e},next:u=>{for(const l of e)l.next&&l.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(l=>l!==u)}}),unsubscribe:()=>{e=[]}}},xe=e=>M(e)||!rt(e);function se(e,s){if(xe(e)||xe(s))return e===s;if(le(e)&&le(s))return e.getTime()===s.getTime();const i=Object.keys(e),r=Object.keys(s);if(i.length!==r.length)return!1;for(const u of i){const l=e[u];if(!r.includes(u))return!1;if(u!=="ref"){const f=s[u];if(le(l)&&le(f)||p(l)&&p(f)||Array.isArray(l)&&Array.isArray(f)?!se(l,f):l!==f)return!1}}return!0}var nt=e=>e.type==="select-multiple",Tt=e=>Re(e)||de(e),Ce=e=>be(e)&&e.isConnected,lt=e=>{for(const s in e)if(ee(e[s]))return!0;return!1};function ke(e,s={}){const i=Array.isArray(e);if(p(e)||i)for(const r in e)Array.isArray(e[r])||p(e[r])&&!lt(e[r])?(s[r]=Array.isArray(e[r])?[]:{},ke(e[r],s[r])):M(e[r])||(s[r]=!0);return s}function ut(e,s,i){const r=Array.isArray(e);if(p(e)||r)for(const u in e)Array.isArray(e[u])||p(e[u])&&!lt(e[u])?F(s)||xe(i[u])?i[u]=Array.isArray(e[u])?ke(e[u],[]):{...ke(e[u])}:ut(e[u],M(s)?{}:s[u],i[u]):i[u]=!se(e[u],s[u]);return i}var _e=(e,s)=>ut(e,s,ke(s)),ot=(e,{valueAsNumber:s,valueAsDate:i,setValueAs:r})=>F(e)?e:s?e===""?NaN:e&&+e:i&&$(e)?new Date(e):r?r(e):e;function Le(e){const s=e.ref;if(!(e.refs?e.refs.every(i=>i.disabled):s.disabled))return Oe(s)?s.files:Re(s)?at(e.refs).value:nt(s)?[...s.selectedOptions].map(({value:i})=>i):de(s)?it(e.refs).value:ot(F(s.value)?e.ref.value:s.value,e)}var Ot=(e,s,i,r)=>{const u={};for(const l of e){const f=y(s,l);f&&w(u,l,f._f)}return{criteriaMode:i,names:[...e],fields:u,shouldUseNativeValidation:r}},ce=e=>F(e)?e:me(e)?e.source:p(e)?me(e.value)?e.value.source:e.value:e,Rt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function tt(e,s,i){const r=y(e,i);if(r||Te(i))return{error:r,name:i};const u=i.split(".");for(;u.length;){const l=u.join("."),f=y(s,l),b=y(e,l);if(f&&!Array.isArray(f)&&i!==l)return{name:i};if(b&&b.type)return{name:l,error:b};u.pop()}return{name:i}}var Ut=(e,s,i,r,u)=>u.isOnAll?!1:!i&&u.isOnTouch?!(s||e):(i?r.isOnBlur:u.isOnBlur)?!e:(i?r.isOnChange:u.isOnChange)?e:!0,It=(e,s)=>!ye(y(e,s)).length&&N(e,s);const jt={mode:P.onSubmit,reValidateMode:P.onChange,shouldFocusError:!0};function Bt(e={},s){let i={...jt,...e},r={submitCount:0,isDirty:!1,isLoading:ee(i.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:i.errors||{},disabled:i.disabled||!1},u={},l=p(i.values)||p(i.defaultValues)?U(i.values||i.defaultValues)||{}:{},f=i.shouldUnregister?{}:U(l),b={action:!1,mount:!1,watch:!1},m={mount:new Set,unMount:new Set,array:new Set,watch:new Set},L,K=0;const D={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:Ne(),array:Ne(),state:Ne()},B=Ge(i.mode),T=Ge(i.reValidateMode),ge=i.criteriaMode===P.all,Ve=t=>a=>{clearTimeout(K),K=setTimeout(t,a)},Z=async t=>{if(D.isValid||t){const a=i.resolver?j((await q()).errors):await J(u,!0);a!==r.isValid&&h.state.next({isValid:a})}},v=t=>D.isValidating&&h.state.next({isValidating:t}),z=(t,a=[],n,d,c=!0,o=!0)=>{if(d&&n){if(b.action=!0,o&&Array.isArray(y(u,t))){const g=n(y(u,t),d.argA,d.argB);c&&w(u,t,g)}if(o&&Array.isArray(y(r.errors,t))){const g=n(y(r.errors,t),d.argA,d.argB);c&&w(r.errors,t,g),It(r.errors,t)}if(D.touchedFields&&o&&Array.isArray(y(r.touchedFields,t))){const g=n(y(r.touchedFields,t),d.argA,d.argB);c&&w(r.touchedFields,t,g)}D.dirtyFields&&(r.dirtyFields=_e(l,f)),h.state.next({name:t,isDirty:_(t,a),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else w(f,t,a)},G=(t,a)=>{w(r.errors,t,a),h.state.next({errors:r.errors})},S=t=>{r.errors=t,h.state.next({errors:r.errors,isValid:!1})},ue=(t,a,n,d)=>{const c=y(u,t);if(c){const o=y(f,t,F(n)?y(l,t):n);F(o)||d&&d.defaultChecked||a?w(f,t,a?o:Le(c._f)):R(t,o),b.mount&&Z()}},ie=(t,a,n,d,c)=>{let o=!1,g=!1;const V={name:t},E=!!(y(u,t)&&y(u,t)._f.disabled);if(!n||d){D.isDirty&&(g=r.isDirty,r.isDirty=V.isDirty=_(),o=g!==V.isDirty);const H=E||se(y(l,t),a);g=!!(!E&&y(r.dirtyFields,t)),H||E?N(r.dirtyFields,t):w(r.dirtyFields,t,!0),V.dirtyFields=r.dirtyFields,o=o||D.dirtyFields&&g!==!H}if(n){const H=y(r.touchedFields,t);H||(w(r.touchedFields,t,n),V.touchedFields=r.touchedFields,o=o||D.touchedFields&&H!==n)}return o&&c&&h.state.next(V),o?V:{}},we=(t,a,n,d)=>{const c=y(r.errors,t),o=D.isValid&&Y(a)&&r.isValid!==a;if(e.delayError&&n?(L=Ve(()=>G(t,n)),L(e.delayError)):(clearTimeout(K),L=null,n?w(r.errors,t,n):N(r.errors,t)),(n?!se(c,n):c)||!j(d)||o){const g={...d,...o&&Y(a)?{isValid:a}:{},errors:r.errors,name:t};r={...r,...g},h.state.next(g)}v(!1)},q=async t=>i.resolver(f,i.context,Ot(t||m.mount,u,i.criteriaMode,i.shouldUseNativeValidation)),te=async t=>{const{errors:a}=await q(t);if(t)for(const n of t){const d=y(a,n);d?w(r.errors,n,d):N(r.errors,n)}else r.errors=a;return a},J=async(t,a,n={valid:!0})=>{for(const d in t){const c=t[d];if(c){const{_f:o,...g}=c;if(o){const V=m.array.has(o.name),E=await et(c,f,ge,i.shouldUseNativeValidation&&!a,V);if(E[o.name]&&(n.valid=!1,a))break;!a&&(y(E,o.name)?V?Ct(r.errors,E,o.name):w(r.errors,o.name,E[o.name]):N(r.errors,o.name))}g&&await J(g,a,n)}}return n.valid},x=()=>{for(const t of m.unMount){const a=y(u,t);a&&(a._f.refs?a._f.refs.every(n=>!Ce(n)):!Ce(a._f.ref))&&Ae(t)}m.unMount=new Set},_=(t,a)=>(t&&a&&w(f,t,a),!se(Ue(),l)),A=(t,a,n)=>Et(t,m,{...b.mount?f:F(a)?l:$(t)?{[t]:a}:a},n,a),O=t=>ye(y(b.mount?f:l,t,e.shouldUnregister?y(l,t,[]):[])),R=(t,a,n={})=>{const d=y(u,t);let c=a;if(d){const o=d._f;o&&(!o.disabled&&w(f,t,ot(a,o)),c=be(o.ref)&&M(a)?"":a,nt(o.ref)?[...o.ref.options].forEach(g=>g.selected=c.includes(g.value)):o.refs?de(o.ref)?o.refs.length>1?o.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(c)?!!c.find(V=>V===g.value):c===g.value)):o.refs[0]&&(o.refs[0].checked=!!c):o.refs.forEach(g=>g.checked=g.value===c):Oe(o.ref)?o.ref.value="":(o.ref.value=c,o.ref.type||h.values.next({name:t,values:{...f}})))}(n.shouldDirty||n.shouldTouch)&&ie(t,c,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&De(t)},W=(t,a,n)=>{for(const d in a){const c=a[d],o=`${t}.${d}`,g=y(u,o);(m.array.has(t)||!xe(c)||g&&!g._f)&&!le(c)?W(o,c,n):R(o,c,n)}},re=(t,a,n={})=>{const d=y(u,t),c=m.array.has(t),o=U(a);w(f,t,o),c?(h.array.next({name:t,values:{...f}}),(D.isDirty||D.dirtyFields)&&n.shouldDirty&&h.state.next({name:t,dirtyFields:_e(l,f),isDirty:_(t,o)})):d&&!d._f&&!M(o)?W(t,o,n):R(t,o,n),Je(t,m)&&h.state.next({...r}),h.values.next({name:t,values:{...f}}),!b.mount&&s()},oe=async t=>{const a=t.target;let n=a.name,d=!0;const c=y(u,n),o=()=>a.type?Le(c._f):Vt(t),g=V=>{d=Number.isNaN(V)||V===y(f,n,V)};if(c){let V,E;const H=o(),ae=t.type===ze.BLUR||t.type===ze.FOCUS_OUT,gt=!Rt(c._f)&&!i.resolver&&!y(r.errors,n)&&!c._f.deps||Ut(ae,y(r.touchedFields,n),r.isSubmitted,T,B),pe=Je(n,m,ae);w(f,n,H),ae?(c._f.onBlur&&c._f.onBlur(t),L&&L(0)):c._f.onChange&&c._f.onChange(t);const Se=ie(n,H,ae,!1),ht=!j(Se)||pe;if(!ae&&h.values.next({name:n,type:t.type,values:{...f}}),gt)return D.isValid&&Z(),ht&&h.state.next({name:n,...pe?{}:Se});if(!ae&&pe&&h.state.next({...r}),v(!0),i.resolver){const{errors:$e}=await q([n]);if(g(H),d){const _t=tt(r.errors,u,n),Ke=tt($e,u,_t.name||n);V=Ke.error,n=Ke.name,E=j($e)}}else V=(await et(c,f,ge,i.shouldUseNativeValidation))[n],g(H),d&&(V?E=!1:D.isValid&&(E=await J(u,!0)));d&&(c._f.deps&&De(c._f.deps),we(n,E,V,Se))}},he=(t,a)=>{if(y(r.errors,a)&&t.focus)return t.focus(),1},De=async(t,a={})=>{let n,d;const c=Ee(t);if(v(!0),i.resolver){const o=await te(F(t)?t:c);n=j(o),d=t?!c.some(g=>y(o,g)):n}else t?(d=(await Promise.all(c.map(async o=>{const g=y(u,o);return await J(g&&g._f?{[o]:g}:g)}))).every(Boolean),!(!d&&!r.isValid)&&Z()):d=n=await J(u);return h.state.next({...!$(t)||D.isValid&&n!==r.isValid?{}:{name:t},...i.resolver||!t?{isValid:n}:{},errors:r.errors,isValidating:!1}),a.shouldFocus&&!d&&fe(u,he,t?c:m.mount),d},Ue=t=>{const a={...l,...b.mount?f:{}};return F(t)?a:$(t)?y(a,t):t.map(n=>y(a,n))},Ie=(t,a)=>({invalid:!!y((a||r).errors,t),isDirty:!!y((a||r).dirtyFields,t),isTouched:!!y((a||r).touchedFields,t),error:y((a||r).errors,t)}),ct=t=>{t&&Ee(t).forEach(a=>N(r.errors,a)),h.state.next({errors:t?r.errors:{}})},je=(t,a,n)=>{const d=(y(u,t,{_f:{}})._f||{}).ref;w(r.errors,t,{...a,ref:d}),h.state.next({name:t,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&d&&d.focus&&d.focus()},ft=(t,a)=>ee(t)?h.values.subscribe({next:n=>t(A(void 0,a),n)}):A(t,a,!0),Ae=(t,a={})=>{for(const n of t?Ee(t):m.mount)m.mount.delete(n),m.array.delete(n),a.keepValue||(N(u,n),N(f,n)),!a.keepError&&N(r.errors,n),!a.keepDirty&&N(r.dirtyFields,n),!a.keepTouched&&N(r.touchedFields,n),!i.shouldUnregister&&!a.keepDefaultValue&&N(l,n);h.values.next({values:{...f}}),h.state.next({...r,...a.keepDirty?{isDirty:_()}:{}}),!a.keepIsValid&&Z()},Be=({disabled:t,name:a,field:n,fields:d,value:c})=>{if(Y(t)){const o=t?void 0:F(c)?Le(n?n._f:y(d,a)._f):c;w(f,a,o),ie(a,o,!1,!1,!0)}},Fe=(t,a={})=>{let n=y(u,t);const d=Y(a.disabled);return w(u,t,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:t}},name:t,mount:!0,...a}}),m.mount.add(t),n?Be({field:n,disabled:a.disabled,name:t,value:a.value}):ue(t,!0,a.value),{...d?{disabled:a.disabled}:{},...i.progressive?{required:!!a.required,min:ce(a.min),max:ce(a.max),minLength:ce(a.minLength),maxLength:ce(a.maxLength),pattern:ce(a.pattern)}:{},name:t,onChange:oe,onBlur:oe,ref:c=>{if(c){Fe(t,a),n=y(u,t);const o=F(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,g=Tt(o),V=n._f.refs||[];if(g?V.find(E=>E===o):o===n._f.ref)return;w(u,t,{_f:{...n._f,...g?{refs:[...V.filter(Ce),o,...Array.isArray(y(l,t))?[{}]:[]],ref:{type:o.type,name:t}}:{ref:o}}}),ue(t,!1,void 0,o)}else n=y(u,t,{}),n._f&&(n._f.mount=!1),(i.shouldUnregister||a.shouldUnregister)&&!(Dt(m.array,t)&&b.action)&&m.unMount.add(t)}}},Pe=()=>i.shouldFocusError&&fe(u,he,m.mount),dt=t=>{Y(t)&&(h.state.next({disabled:t}),fe(u,(a,n)=>{let d=t;const c=y(u,n);c&&Y(c._f.disabled)&&(d||(d=c._f.disabled)),a.disabled=d},0,!1))},qe=(t,a)=>async n=>{let d;n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let c=U(f);if(h.state.next({isSubmitting:!0}),i.resolver){const{errors:o,values:g}=await q();r.errors=o,c=g}else await J(u);if(N(r.errors,"root"),j(r.errors)){h.state.next({errors:{}});try{await t(c,n)}catch(o){d=o}}else a&&await a({...r.errors},n),Pe(),setTimeout(Pe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:j(r.errors)&&!d,submitCount:r.submitCount+1,errors:r.errors}),d)throw d},yt=(t,a={})=>{y(u,t)&&(F(a.defaultValue)?re(t,U(y(l,t))):(re(t,a.defaultValue),w(l,t,U(a.defaultValue))),a.keepTouched||N(r.touchedFields,t),a.keepDirty||(N(r.dirtyFields,t),r.isDirty=a.defaultValue?_(t,U(y(l,t))):_()),a.keepError||(N(r.errors,t),D.isValid&&Z()),h.state.next({...r}))},We=(t,a={})=>{const n=t?U(t):l,d=U(n),c=t&&!j(t)?d:l;if(a.keepDefaultValues||(l=n),!a.keepValues){if(a.keepDirtyValues)for(const o of m.mount)y(r.dirtyFields,o)?w(c,o,y(f,o)):re(o,y(c,o));else{if(Me&&F(t))for(const o of m.mount){const g=y(u,o);if(g&&g._f){const V=Array.isArray(g._f.refs)?g._f.refs[0]:g._f.ref;if(be(V)){const E=V.closest("form");if(E){E.reset();break}}}}u={}}f=e.shouldUnregister?a.keepDefaultValues?U(l):{}:U(c),h.array.next({values:{...c}}),h.values.next({values:{...c}})}m={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!b.mount&&s(),b.mount=!D.isValid||!!a.keepIsValid||!!a.keepDirtyValues,b.watch=!!e.shouldUnregister,h.state.next({submitCount:a.keepSubmitCount?r.submitCount:0,isDirty:a.keepDirty?r.isDirty:!!(a.keepDefaultValues&&!se(t,l)),isSubmitted:a.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:a.keepDirtyValues?a.keepDefaultValues&&f?_e(l,f):r.dirtyFields:a.keepDefaultValues&&t?_e(l,t):{},touchedFields:a.keepTouched?r.touchedFields:{},errors:a.keepErrors?r.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},He=(t,a)=>We(ee(t)?t(f):t,a);return{control:{register:Fe,unregister:Ae,getFieldState:Ie,handleSubmit:qe,setError:je,_executeSchema:q,_getWatch:A,_getDirty:_,_updateValid:Z,_removeUnmounted:x,_updateFieldArray:z,_updateDisabledField:Be,_getFieldArray:O,_reset:We,_resetDefaultValues:()=>ee(i.defaultValues)&&i.defaultValues().then(t=>{He(t,i.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:t=>{r={...r,...t}},_disableForm:dt,_subjects:h,_proxyFormState:D,_setErrors:S,get _fields(){return u},get _formValues(){return f},get _state(){return b},set _state(t){b=t},get _defaultValues(){return l},get _names(){return m},set _names(t){m=t},get _formState(){return r},set _formState(t){r=t},get _options(){return i},set _options(t){i={...i,...t}}},trigger:De,register:Fe,handleSubmit:qe,watch:ft,setValue:re,getValues:Ue,reset:He,resetField:yt,clearErrors:ct,unregister:Ae,setError:je,setFocus:(t,a={})=>{const n=y(u,t),d=n&&n._f;if(d){const c=d.refs?d.refs[0]:d.ref;c.focus&&(c.focus(),a.shouldSelect&&c.select())}},getFieldState:Ie}}function Pt(e={}){const s=I.useRef(),i=I.useRef(),[r,u]=I.useState({isDirty:!1,isValidating:!1,isLoading:ee(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:ee(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...Bt(e,()=>u(f=>({...f}))),formState:r});const l=s.current.control;return l._options=e,St({subject:l._subjects.state,next:f=>{pt(f,l._proxyFormState,l._updateFormState,!0)&&u({...l._formState})}}),I.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),I.useEffect(()=>{if(l._proxyFormState.isDirty){const f=l._getDirty();f!==r.isDirty&&l._subjects.state.next({isDirty:f})}},[l,r.isDirty]),I.useEffect(()=>{e.values&&!se(e.values,i.current)?(l._reset(e.values,l._options.resetOptions),i.current=e.values,u(f=>({...f}))):l._resetDefaultValues()},[e.values,l]),I.useEffect(()=>{e.errors&&l._setErrors(e.errors)},[e.errors,l]),I.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),I.useEffect(()=>{e.shouldUnregister&&l._subjects.values.next({values:l._getWatch()})},[e.shouldUnregister,l]),s.current.formState=Ft(r,l),s.current}const qt="_form_kex1w_1",Wt="_title_kex1w_7",Ht="_titleDark_kex1w_13",$t="_inputContainer_kex1w_16",Kt="_inputName_kex1w_23",zt="_input_kex1w_16",Gt="_inputDark_kex1w_41",Jt="_errorInput_kex1w_45",Qt="_errorMessage_kex1w_49",Xt="_messageVisible_kex1w_57",Yt="_submitErrorMessage_kex1w_60 _errorMessage_kex1w_49",Zt="_button_kex1w_68",er="_buttonDark_kex1w_85",tr="_buttonDisabled_kex1w_89",rr="_captionContainer_kex1w_99",sr="_caption_kex1w_99",ir="_captionDark_kex1w_107",ar="_link_kex1w_110",nr="_linkDark_kex1w_118",k={form:qt,title:Wt,titleDark:Ht,inputContainer:$t,inputName:Kt,input:zt,inputDark:Gt,errorInput:Jt,errorMessage:Qt,messageVisible:Xt,submitErrorMessage:Yt,button:Zt,buttonDark:er,buttonDisabled:tr,captionContainer:rr,caption:sr,captionDark:ir,link:ar,linkDark:nr},yr=vt.memo(e=>{var h,B;const{theme:s}=bt(),{register:i,handleSubmit:r,formState:{errors:u,isValid:l},reset:f}=Pt({mode:"onChange"}),{isLoginLoading:b,isRegistrationLoading:m,loginError:L,registrationError:K}=xt(),D=T=>{e.onSubmit(T),f()};return C.jsxs("form",{className:k.form,onSubmit:r(D),noValidate:!0,children:[C.jsx("h2",{className:Q(k.title,{[k.titleDark]:s==="dark"}),children:e.name}),C.jsxs("div",{className:k.inputContainer,children:[C.jsx("label",{className:k.inputName,htmlFor:"email",children:"E-mail"}),C.jsx("input",{...i("email",{required:"Это поле обязательно к заполнению",pattern:{value:/.+@.+\..+/,message:"Указан некорректный email"}}),type:"email",id:"email",autoComplete:"email",className:Q(k.input,{[k.inputDark]:s==="dark"},{[k.errorInput]:u.email})}),C.jsx("span",{className:Q(k.errorMessage,{[k.messageVisible]:u.email}),children:(h=u.email)==null?void 0:h.message})]}),C.jsxs("div",{className:k.inputContainer,children:[C.jsx("label",{className:k.inputName,htmlFor:"email",children:"Password"}),C.jsx("input",{...i("password",{required:"Это поле обязательно к заполнению",pattern:{value:/^(?!.*[А-Я а-я]).{8,50}/,message:"Указан некорректный пароль"},minLength:{value:8,message:"Минимальное количество символов - 8"},maxLength:{value:50,message:"Максимальное количество символов - 50"}}),className:Q(k.input,{[k.inputDark]:s==="dark"},{[k.errorInput]:u.password}),type:"password",id:"password"}),C.jsx("span",{className:Q(k.errorMessage,{[k.messageVisible]:u.password}),children:(B=u.password)==null?void 0:B.message})]}),C.jsx("p",{className:Q(k.submitErrorMessage,{[k.messageVisible]:e.name==="Регистрация"?K:L}),children:e.name==="Регистрация"?K:L}),C.jsx("button",{type:"submit",disabled:!l,className:Q(k.button,{[k.buttonDark]:s==="dark"},{[k.buttonDisabled]:!l}),children:b||m?C.jsx(kt,{height:40}):e.name==="Регистрация"?"Зарегистрироваться":"Войти"}),C.jsx("div",{className:k.captionContainer,children:C.jsxs("p",{className:Q(k.caption,{[k.captionDark]:s==="dark"}),children:[e.name==="Регистрация"?"Уже зарегистрированы? ":"Ещё не зарегистрированы? ",C.jsx(mt,{to:e.name==="Регистрация"?"/aston-react-project/signin":"/aston-react-project/signup",className:Q(k.link,{[k.linkDark]:s==="dark"}),children:e.name==="Регистрация"?"Войти":"Регистрация"})]})})]})});export{yr as A};
