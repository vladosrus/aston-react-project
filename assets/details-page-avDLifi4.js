import{r as a,A as N,a as P,j as o,L as S,c as y,n as v,o as E,P as F}from"./index-BI879c8t.js";import{S as L}from"./section-SfZhomA4.js";import{u as A,L as B}from"./use-favorites-Fadcqixl.js";import{S as C}from"./small_preloader-xUj9wYKZ.js";const M="_article_tgpxw_1",b="_img_tgpxw_7",G="_descriptionList_tgpxw_13",J="_descriptionListItem_tgpxw_18",O="_category_tgpxw_21",Q="_description_tgpxw_13",R="_descriptionDark_tgpxw_31",T="_link_tgpxw_34",U="_linkDark_tgpxw_40",e={article:M,img:b,descriptionList:G,descriptionListItem:J,category:O,description:Q,descriptionDark:R,link:T,linkDark:U},$=a.memo(t=>{var l,d,m,h,g,p,x,_,f,k,u,I,j;if(t.error)if("status"in t.error){const r="error"in t.error?t.error.error:JSON.stringify(t.error.data);throw new Error(r)}else{const r=t.error.message;throw new Error(r)}const{isFavorite:i,isLoading:s,handleFavoriteButtonClick:n}=A((l=t.photoInfo)==null?void 0:l.id),{isAuth:w}=a.useContext(N),{theme:c}=P(),D=[{category:"Создатель:",description:(d=t.photoInfo)==null?void 0:d.creator.name},{category:"Страна:",description:(m=t.photoInfo)==null?void 0:m.creator.country},{category:"Описание:",description:(((h=t.photoInfo)==null?void 0:h.description)||"")>(((g=t.photoInfo)==null?void 0:g.alt_description)||"")?(p=t.photoInfo)==null?void 0:p.description:(x=t.photoInfo)==null?void 0:x.alt_description},{category:"Профиль создателя в Unsplash:",description:o.jsx(S,{to:((_=t.photoInfo)==null?void 0:_.creator.profileLink)||"#",className:y(e.link,{[e.linkDark]:c==="dark"}),target:"_blank",rel:"noopener noreferrer",children:`@${(f=t.photoInfo)==null?void 0:f.creator.profileName}`})}];return o.jsxs("article",{className:e.article,children:[o.jsx("img",{className:e.img,src:(k=t.photoInfo)==null?void 0:k.url,alt:(u=t.photoInfo)!=null&&u.description?(I=t.photoInfo)==null?void 0:I.description:(j=t.photoInfo)==null?void 0:j.alt_description}),o.jsxs("ul",{className:e.descriptionList,children:[D.map(r=>o.jsxs("li",{className:e.descriptionListItem,children:[o.jsx("span",{className:e.category,children:r.category}),o.jsx("p",{className:y(e.description,{[e.descriptionDark]:c==="dark"}),children:r.description})]},r.category)),o.jsx("li",{className:e.descriptionListItem,children:w&&(s?o.jsx(C,{width:32,height:32}):o.jsx(B,{isFavorite:i,handleFavoriteButtonClick:n}))})]})]})}),V=a.memo(()=>{const{id:t}=v(),{data:i,isLoading:s,error:n}=E(t);return o.jsxs(o.Fragment,{children:[o.jsx(L,{type:"top"}),o.jsx(L,{type:"main",children:s?o.jsx(F,{}):o.jsx($,{photoInfo:i,error:n})})]})});export{V as DetailsPage,V as default};
