import{r as w,d as _,a as D,j as s,c as a,L as j}from"./index-BI879c8t.js";import{u as N}from"./index.esm-JyalfEUC.js";import{u as f}from"./use-auth-0nRiprKZ.js";import{S as C}from"./small_preloader-xUj9wYKZ.js";const M="_form_kex1w_1",E="_title_kex1w_7",S="_titleDark_kex1w_13",v="_inputContainer_kex1w_16",V="_inputName_kex1w_23",L="_input_kex1w_16",F="_inputDark_kex1w_41",y="_errorInput_kex1w_45",I="_errorMessage_kex1w_49",q="_messageVisible_kex1w_57",A="_submitErrorMessage_kex1w_60 _errorMessage_kex1w_49",R="_button_kex1w_68",P="_buttonDark_kex1w_85",T="_buttonDisabled_kex1w_89",O="_captionContainer_kex1w_99",z="_caption_kex1w_99",B="_captionDark_kex1w_107",G="_link_kex1w_110",H="_linkDark_kex1w_118",e={form:M,title:E,titleDark:S,inputContainer:v,inputName:V,input:L,inputDark:F,errorInput:y,errorMessage:I,messageVisible:q,submitErrorMessage:A,button:R,buttonDark:P,buttonDisabled:T,captionContainer:O,caption:z,captionDark:B,link:G,linkDark:H},k=t=>{var c,u;const{theme:n}=D(),{register:i,handleSubmit:p,formState:{errors:r,isValid:o},reset:d}=N({mode:"onChange"}),{isLoginLoading:x,isRegistrationLoading:b,loginError:m,registrationError:l}=f(),g=h=>{t.onSubmit(h),d()};return s.jsxs("form",{className:e.form,onSubmit:p(g),noValidate:!0,children:[s.jsx("h2",{className:a(e.title,{[e.titleDark]:n==="dark"}),children:t.name}),s.jsxs("div",{className:e.inputContainer,children:[s.jsx("label",{className:e.inputName,htmlFor:"email",children:"E-mail"}),s.jsx("input",{...i("email",{required:"Это поле обязательно к заполнению",pattern:{value:/.+@.+\..+/,message:"Указан некорректный email"}}),type:"email",id:"email",autoComplete:"email",className:a(e.input,{[e.inputDark]:n==="dark"},{[e.errorInput]:r.email})}),s.jsx("span",{className:a(e.errorMessage,{[e.messageVisible]:r.email}),children:(c=r.email)==null?void 0:c.message})]}),s.jsxs("div",{className:e.inputContainer,children:[s.jsx("label",{className:e.inputName,htmlFor:"email",children:"Password"}),s.jsx("input",{...i("password",{required:"Это поле обязательно к заполнению",pattern:{value:/^(?!.*[А-Я а-я]).{8,50}/,message:"Указан некорректный пароль"},minLength:{value:8,message:"Минимальное количество символов - 8"},maxLength:{value:50,message:"Максимальное количество символов - 50"}}),className:a(e.input,{[e.inputDark]:n==="dark"},{[e.errorInput]:r.password}),type:"password",id:"password"}),s.jsx("span",{className:a(e.errorMessage,{[e.messageVisible]:r.password}),children:(u=r.password)==null?void 0:u.message})]}),s.jsx("p",{className:a(e.submitErrorMessage,{[e.messageVisible]:t.name==="Регистрация"?l:m}),children:t.name==="Регистрация"?l:m}),s.jsx("button",{type:"submit",disabled:!o,className:a(e.button,{[e.buttonDark]:n==="dark"},{[e.buttonDisabled]:!o}),children:x||b?s.jsx(C,{height:40}):t.name==="Регистрация"?"Зарегистрироваться":"Войти"}),s.jsx("div",{className:e.captionContainer,children:s.jsxs("p",{className:a(e.caption,{[e.captionDark]:n==="dark"}),children:[t.name==="Регистрация"?"Уже зарегистрированы? ":"Ещё не зарегистрированы? ",s.jsx(j,{to:t.name==="Регистрация"?"/aston-react-project/signin":"/aston-react-project/signup",className:a(e.link,{[e.linkDark]:n==="dark"}),children:t.name==="Регистрация"?"Войти":"Регистрация"})]})})]})},W=w.memo(k);k.propTypes={name:_.oneOf(["Авторизация","Регистрация"]).isRequired,onSubmit:_.func.isRequired};export{W as A};
